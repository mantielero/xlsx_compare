name: Builder
run-name: ${{ github.actor }} is testing out GitHub Actions ðŸš€
on: [push]
jobs:

  tests:
    runs-on: ${{ matrix.os }}
    strategy:
      matrix:
        nimversion:
          - binary:stable
        os:
          - ubuntu-latest
          #- windows-latest

    steps:
      - uses: actions/checkout@v4
      - name: Install Nim
        uses: iffy/install-nim@v5
        with:
          nim-version: ${{ matrix.nimversion }}
          repo-token: ${{ secrets.GITHUB_TOKEN }} 


      - name: Install the xlsx_compare package
        run: nimble install -y
      - name: Compare the file
        run: nim c -d:release src/xlsx_compare

      - name: zip it
        run: zip -j xlsx_compare_linux.zip `readlink -f ~/.nimble/bin/xlsx_compare`
      # - name: Update nightly release
      #   uses: eine/tip@master
      #   with:
      #     tag: nightly
      #     rm: true
      #     token: ${{ secrets.GITHUB_TOKEN }}
      #     files: xlsx_compare